## 进程

### 进程、线程与协程的区别是什么？

- 进程
    - **系统资源分配的基本单位**
    - 分配三种基本内存资源
        - 代码段：应用的执行代码
        - 数据段：应用的全局变量、常量、静态变量（不会变化或很少变化的内容）
        - 堆栈段
            - 堆空间：存放各种变量数据
            - 栈空间：子任务（线程、协程）独立存放自己数据的地方（函数调用、参数、返回值、局部变量等）
- 线程
    - **CPU 调度的基本单位**
    - 在进程内创建，可以共享进程的资源
    - 需要为每个线程分配独立的栈空间，**栈空间的大小是固定的**
- 协程
    - 可以在应用态协作的程序，它的调度不是操作系统处理，而是**应用系统自己来调度处理**，也称为轻量级线程
    - 和线程一样，共享进程的资源（除了自己的栈空间）
    - 和线程的主要区别
        1. 调度方式
            - 线程：操作系统调度
            - 协程：应用系统自己调度
        2. 栈空间大小
            - 线程：固定
            - 协程：可以**动态调整**（内存利用率更高）
    - 协程的优势
        - 更好利用 CPU，不用把 CPU 浪费在线程调度和上下文切换上
        - 可以更好利用内存

### 并行与并发的区别是什么？

- 并行：强调一起执行（多条线一起），需要同时
- 并发：强调有处理多个任务的能力，不一定要同时
- 所以：并行一定是并发，并行概念是并发概念的一个子集

如下图，并发是两个队列**交替**使用一台咖啡机，并行是两个队列**同时**使用两台咖啡机。

![并行与并发](/img/os/concurrent-parallel.jpg)

## 参考资料

- [高并发和高性能系统中进程、线程、协程、队列的详解，以及各运行模式的对比](https://www.imooc.com/article/31751)

